/* 

Get ready in a week:
https://discord.com/channels/453718509600374794/453718509600374796/1099856001710178304

S5 routing guide:
https://docs.google.com/document/d/1vPYKLafLIZ-F_cBzly0exRtCWgevApScUkfNyBf-Ugc/edit

CSMC peeks:
https://docs.google.com/document/d/1SX4cQNTZ1sFgCgkuCGFmz7B9HtaCPcEeYoV9wCEOSt4/edit

Dungeon route explanations:
https://www.twitch.tv/collections/SvZuakfudRZWUA
https://www.youtube.com/watch?v=b0bDi7Zj0Dg

Island Sail Times from warp points:
https://docs.google.com/document/d/1yuwltf5YrqBz8FPeFRU4gQHMbFTIFMPNNtVbxw-GLfY/edit

General glitch guide:
https://youtu.be/MtmalMnUMcE

Superswim tutorial:
https://youtu.be/SVHwWLWeeL0

Storage tutorial:
https://youtu.be/HvuwqNct9xE

Ganon Tower maze:
https://discord.com/channels/453718509600374794/574734816314916865/829385362760794112

Azer Wind Waker Randomizer Glitched Logic:
https://www.youtube.com/playlist?list=PLmBfgSBleztQ7eQO75k8-p0cOOcwqqYwN

Azer TWW Tricks playlist:
https://www.youtube.com/playlist?list=PLDnpp7wnIbqesp5DOXyq0IqtbGOFU08GI

Wooferzfg TWWR Strats playlist:
https://www.youtube.com/playlist?list=PLwkby8dYaMFbB7HvUvRGD9wZBKpdUI2Nm

Every trick viable in WW rando (Google Doc, 2020):
https://docs.google.com/document/d/19ljqWdq8uhnyDOt-mKOWnYCSnbgNYg34e2OT9M6Tjic/edit#heading=h.bd1740c975qe

Diamond Steppe Early tutorial:
https://www.twitch.tv/videos/462302948

Winds Requiem tutorials:
https://www.youtube.com/watch?v=2QZd__yjukg

Rusty Nails tutorials:
https://www.youtube.com/@RuztyNails33/videos

WW Rando wiki:
https://twwrando.com/index.php/Ganon%27s_Tower

Miniblins Guide:
https://docs.google.com/document/d/18gbIwZilWcmujcjxD2nep-kBaJSOh5RTY9-ikjFUDZI/edit

Location Hints List:
https://github.com/LagoLunatic/wwrando/blob/master/data/location_hints.txt

For those that are curious, here's how each mail check spawns:

Letter from Baito's Mother: Mail Note to Mom and wait until the next Midnight (Using Song of Passing works)
Letter from Baito: Receive Letter from Baito's Mother and Defeat Jalhalla (Earth Temple Boss)
Letter from Komali's Father: Collect Farore's Pearl
Letter Advertising Bombs in Beedle's Shop: Collect Bombs (the item, not a Bomb Bag)
Letter Advertising Rock Spire Shop Ship: Collect any Wallet
Letter from Orca: Defeat Kalle Demos (Forbidden Woods Boss)
Letter from Grandma: Save Grandma with a fairy, then wait until the next Midnight (https://youtu.be/bQm3tyoXzAU)
Letter From Aryll: Defeat Helmaroc King (Forsaken Fortress Boss) and wait until next Midnight

It's important to note that Mail checks locked behind bosses (Orca, Baito, Aryll) will only be in logic if the dungeon that the boss belongs to is one of the Race Mode dungeons 

S4 settings: MS45LjAAQQAFCyIAD3DAAgAAAAAAAQAA
S5 settings: UzUuMABTNQAVAyIAJ3l8gAEWAIx7AIE+AAAA (fake woofer?): MS4xMC4wAEEAFQMiAJPowAMMsACCcQ8AAMkHAQAA
Miniblins tournament: MS4xMC4wAEEABwMCAHOGwAMMcADC+Q8AAskPKQAG


Dungeon Times (for me):

DRC Full Clear:
DRC Go mode with bow+grappling hook: ~6:35
TotG Full Clear: ~20 minutes just to get to the boss


Path to ganon thing:
an item on path to ganon cannot be path to your required dungeons. 
-so if grapple+hook+boomerang are requried for you dungeons, then a path to ganon must be a sword or bow?
-also, if you find some item on path to ganon, it cant be path to your dungeons, so there must be another item that lets you do that dungeon, and getting the path to ganon item must be locked by those item(s)


Dungeon Shortcut warps between dungeons:

DRC -> FW -> ToG
FF -> ET -> WT

DRC: Next to the rock that blocks the door to Room with Water jugs in DRC
FW: On the upper platform at the door in the 2nd room of FW
ToG: Next to the door in the room with the Beamos and rats where you have to put 2 statues on switches to activate the floating platforms
FF: Through door close to the chest that gets spawned by beating phantom Ganon in FF
ET: At the top of the stairs where you would use Medli to fly over to the switches at the top of the 2 pillars in the 2nd room of ET
WT: In the room where you have to use Makar to plant the tree at the top in the 4th room of WT



WT get on statue in main room without leaf: https://discord.com/channels/453718509600374794/453718509600374796/1125127840585756672

Forest haven check routing:
What is the right order to do Forest Haven if Woods is required? Woods -> Tree Branch -> Small Island or Tree Branch -> Small Island -> Woods?

45 Sometimes Hints:
Outset Island - Great Fairy
Outset Island - Jabun's Cave
Outset Island - Dig up Black Soil
Windfall Island - Zunari - Stock Exotic Flower in Zunari's Shop
Windfall Island - Mila - Follow the Thief
Windfall Island - Pompie and Vera - Secret Meeting Photo
Windfall Island - Minenco - Miss Windfall Photo
Dragon Roost Island - Fly Across Platforms Around Island
Forest Haven - On Tree Branch
Forest Haven - Small Island Chest
Fire Mountain - Cave - Chest
Ice Ring Isle - Inner Cave - Chest
Mailbox - Letter from Baito
Mailbox - Letter from Orca
Mailbox - Letter from Aryll
The Great Sea - Cyclos
The Great Sea - Ghost Ship
Needle Rock Isle - Chest
Needle Rock Isle - Cave
Angular Isles - Cave
Islet of Steel - Interior
Bird's Peak Rock - Cave
Pawprint Isle - Chuchu Cave - Scale the Wall
Thorned Fairy Island - Great Fairy
Tingle Island - Ankle - Reward for All Tingle Statues
Bomb Island - Cave
Horseshoe Island - Play Golf
Forsaken Fortress - Phantom Ganon
Dragon Roost Cavern - Mini-Boss
Dragon Roost Cavern - Under Rope Bridge
Dragon Roost Cavern - Big Key Chest
Forbidden Woods - Mothula Mini-Boss Room
Forbidden Woods - Chest in Locked Tree Trunk
Forbidden Woods - Big Key Chest
Tower of the Gods - Hop Across Floating Boxes
Tower of the Gods - First Chest Guarded by Armos Knights
Tower of the Gods - Darknut Mini-Boss Room
Earth Temple - Stalfos Mini-Boss Room
Earth Temple - Kill All Floormasters in Foggy Room
Earth Temple - Stalfos Crypt Room
Earth Temple - Big Key Chest
Wind Temple - Big Key Chest
Wind Temple - Wizzrobe Mini-Boss Room
Wind Temple - Chest Behind Seven Armos
Wind Temple - Kill All Enemies in Tall Basement Room

Always Hint:
Ganon's Tower - Maze Chest
*/

var img_dir = "./images/tww/";
var Dungeon_Names = ["Forsaken Fortress", "Dragon Roost Cavern", "Forbidden Woods", "Tower of the Gods", "Earth Temple", "Wind Temple"];
var Key_Dungeon_Names = ["Dragon Roost Cavern", "Forbidden Woods", "Tower of the Gods", "Earth Temple", "Wind Temple"];
var Key_Dungeon_Names_Short = ["DRC", "FW", "TotG", "ET", "WT"];
var Dungeon_Items_Remaining = {
	"Dragon Roost Cavern": 12-2,
	"Forbidden Woods": 14-1,
	"Tower of the Gods": 11-1,
	"Earth Temple": 12-1,
	"Wind Temple": 11-1
}
var Dungeon_Requirements = [
	["Skull Hammer", "Master Sword", "Deku Leaf", "Magic Meter", "Hookshot"], // FF
	["Grappling Hook", "Heros Bow"], // DRC
	["Deku Leaf", "Magic Meter", "Boomerang", "Heros Bow", "Bombs"], // FW
	["Din's Pearl", "Farore's Pearl", "Nayru's Pearl", "Bombs", "Heros Bow", "Deku Leaf", "Magic Meter", "Grappling Hook"], // ToG
	["Power Bracelets", "Command Melody", "Mirror Shield", "Skull Hammer", "Power Bracelets", "Command Melody", "Deku Leaf", "Magic Meter", "Mirror Shield", "Heros Bow (All Arrows)"], // ET
	["Iron Boots", "Skull Hammer", "Command Melody", "Deku Leaf", "Magic Meter", "Hookshot"], // WT
	["Master Sword (Full Power)", "Heros Bow (All Arrows)", "Magic Meter", "Hookshot"] // Ganon
];
var Dungeon_Names_Short = ["ff", "drc", "fw", "tog", "et", "wt", "gan"];

/* Create check location elements */
let column = document.getElementById("normalColumn1");
for(let i = 0; i < Data["areas"].length; i++) {
	let Area = Data["areas"][i];
	
	if(Data["game"] == "ww") {
		if (Area["name"] == "Dragon Roost Island") { column = document.getElementById("normalColumn2"); }
		else if (Area["name"] == "Tingle Island") { column = document.getElementById("normalColumn3"); }
		else if (Area["name"] == "Forsaken Fortress") { column = document.getElementById("dungeonColumn"); }
	}
	
	let span = document.createElement("span");
	span.id = Area["name"]+"_span";
	
	let elem = document.createElement("small");
	elem.innerHTML = Area["display_name"];
	elem.className = "area_name";
	if(Data["game"] == "ww") {
		if(Area["name"] == "Forsaken Fortress") {
			elem.id = "title_lightblue";
			elem.className = "area_titles";
		}
		else if(Area["name"] == "Dragon Roost Cavern") {
			elem.id = "title_red";
			elem.className = "area_titles";
		}
		else if(Area["name"] == "Forbidden Woods") {
			elem.id = "title_green";
			elem.className = "area_titles";
		}
		else if(Area["name"] == "Tower of the Gods") {
			elem.id = "title_blue";
			elem.className = "area_titles";
		}
		else if(Area["name"] == "Earth Temple") {
			elem.id = "title_orange";
			elem.className = "area_titles";
		}
		else if(Area["name"] == "Wind Temple") {
			elem.id = "title_white";
			elem.className = "area_titles";
		}
	}
	span.appendChild(elem);
	if(!Key_Dungeon_Names.includes(Area["name"]))
		span.appendChild(document.createElement("br"));
	
	if(Key_Dungeon_Names.includes(Area["name"])) {
		elem = document.createElement("span");
		elem.id = Area["name"]+"_Item_Count";
		elem.className = "superdot";
		elem.innerHTML = Area["item_count"];
		span.appendChild(elem);
		
		elem = document.createElement("span");
		elem.id = Area["name"]+"_Small_Key_Count";
		elem.className = "superdotSK";
		elem.innerHTML = Area["small_key_count"]; 
		span.appendChild(elem);
		
		elem = document.createElement("span");
		elem.id = Area["name"]+"_Big_Key_Count";
		elem.className = "superdotBK";
		elem.innerHTML = Area["big_key_count"];
		span.appendChild(elem);
		
		span.appendChild(document.createElement("br"));
	}
	
	for(let j = 0; j < Area["locations"].length; j++) {
		
		let loc = Area["locations"][j];
		
		elem = document.createElement("input");
		elem.id = loc["name"];
		if(!Dungeon_Names.includes(Area.name) && column != document.getElementById("songdiv"))
			elem.className = "other_input"; // picture_input
		else
			elem.className = "other_input";
		elem.spellcheck = false;
		//if(!Area["name"].includes("Temple"))
		//	elem.style.backgroundImage = "url('"+img_dir+"areas/"+Area["name"].replace("'", "")+".png')";
		span.appendChild(elem);

		elem = document.createElement("small");
		elem.id = "text_" + loc["name"];
		elem.className = "ool_check_text";
		elem.onmousedown = click_check;
		elem.innerHTML = loc["display_name"];
		if(loc.description != undefined)
			elem.title = loc.description;
		span.appendChild(elem);
		
		elem = document.createElement("br");
		elem.id = "br_" + loc["name"];
		span.appendChild(elem);
	}
	
	column.appendChild(span);
}

var IslandNames = [
	"Forsaken Fort", "Star Island", "Northern Fairy", "Gale Isle", "Crescent Moon", "Seven-Star", "Overlook Island", "Four-Eye Reef", "Mother+Child", "Spectacle", "Windfall Island", "Pawprint Isle", "Dragon Roost", "Flight Control", "Western Fairy", "Rock Spire Isle", "Tingle Island", "North Triangle", "Eastern Fairy", "Fire Mountain", "Star Belt Arch.", "Three-Eye Reef", "Greatfish Isle", "Cyclops Reef", "Six-Eye Reef", "Tower of Gods", "East Triangle", "Thorned Fairy", "Needle Rock", "Islet of Steel", "Stone Watcher", "South Triangle", "Private Oasis", "Bomb Island", "Bird's Peak Rock", "Diamond Steppe", "Five-Eye Reef", "Shark Island", "Southern Fairy", "Ice Ring Isle", "Forest Haven", "Cliff Plateau", "Horseshoe", "Outset Island", "Headstone", "Two-Eye Reef", "Angular Isles", "Boating Course", "Five-Star Isles"
];
var JunkIslandNames = [
	"Star Island", "Seven-Star", "Overlook Island", "Four-Eye Reef", "Spectacle", "Flight Control", "Rock Spire Isle", "North Triangle", "Star Belt Arch.", "Three-Eye Reef", "Cyclops Reef", "Six-Eye Reef", "East Triangle", "Stone Watcher", "South Triangle", "Five-Eye Reef", "Shark Island", "Two-Eye Reef", "Boating Course", "Five-Star Isles"
];
var DungeonIslandNames = [
	"Forsaken Fort", "Gale Isle", "Dragon Roost", "Tower of Gods", "Forest Haven", "Headstone"
];

/* Create Map */
let map_span = document.getElementById("map_span");

let map_elem = document.createElement("img");
map_elem.src = "./images/tww/maps/sea_chart_s6.png";
map_elem.id = "world_map";
map_elem.className = "map_img";
map_span.appendChild(map_elem);

let y = 0;
let x = 1;
for(let i = 0; i <= 48; i++) {
	let label = document.createElement("div");
	label.id = "label_"+IslandNames[i];
	label.innerHTML = IslandNames[i];
	label.className = "map_label";
	if(JunkIslandNames.includes(IslandNames[i]))
		label.style.color = "#ff7970";
	else if(DungeonIslandNames.includes(IslandNames[i]))
		label.style.color = "chartreuse";
	else
		label.style.color = "white";
	map_span.appendChild(label);
	label.style.position = "absolute";
	label.style.top = y+"%";
	label.style.left = x+"%";
	if(i % 7 == 6) {
		y += 100/7;
		x = 1;
	}
	else {
		x += 100/7;
	}
}

document.getElementById("Din's Pearl_img").style.position = "absolute";
document.getElementById("Din's Pearl_img").style.top = "227px";
document.getElementById("Din's Pearl_img").style.left = "1888px";
document.getElementById("Farore's Pearl_img").style.position = "absolute";
document.getElementById("Farore's Pearl_img").style.top = "227px";
document.getElementById("Farore's Pearl_img").style.left = "1935px";
document.getElementById("Nayru's Pearl_img").style.position = "absolute";
document.getElementById("Nayru's Pearl_img").style.top = "192px";
document.getElementById("Nayru's Pearl_img").style.left = "1911px";

var settings = Data.settings.find(t=>t.name === document.getElementById("settings_option").value);

// Audio stuff
var isPlaying = false;

document.getElementById("myAudio").onplaying = function() {
  isPlaying = true;
};
document.getElementById("myAudio").onpause = function() {
  isPlaying = false;
};

var $audio = $('#myAudio');
document.getElementById("myAudio").volume = 0.25;
$audio.attr('src', "./sound/257 BPM - 7 frames.mp3");
document.getElementById("audio_title").innerHTML = "257 - Special Chest / FW2 / ET2 / Cabana / MnC Back / Dia-Islet";

/* FUNCTIONS */

function update_required_dungeons() {
	let value = document.getElementById("required_dungeon_input").value;
	let dungeons = []
	
	if(value.length == 2 || value.length == 4 || value.length == 6 || value.length == 8) {
		dungeons.push(value.slice(0, 2));
		dungeons.push(value.slice(2, 4));
		dungeons.push(value.slice(4, 6));
		dungeons.push(value.slice(6, 8));
	}
	else
		dungeons = [];
	
	Required_Dungeons = [];

	let counter = 1;
	let appendColumn = "normalColumn3";

	if(dungeons.includes("ff")) {
		if(!Required_Dungeons.includes("Forsaken Fortress"))
			Required_Dungeons.push("Forsaken Fortress");
		document.getElementById("ff_span").style.display = "block";
		
		if(counter >= 2)
			appendColumn = "dungeonColumn1";
		
		if(document.getElementById("Forsaken Fortress_span").parentElement != document.getElementById(appendColumn))
			document.getElementById(appendColumn).appendChild(document.getElementById("Forsaken Fortress_span"));
		counter += 1;
	}
	else {
		document.getElementById("ff_span").style.display = "none";
		document.getElementById("dungeonColumn").appendChild(document.getElementById("Forsaken Fortress_span"));
	}
	
	if(dungeons.includes("dr") || dungeons.includes("dc")) {
		if(!Required_Dungeons.includes("Dragon Roost Cavern"))
			Required_Dungeons.push("Dragon Roost Cavern");
		document.getElementById("drc_span").style.display = "block";
		
		if(counter >= 2)
			appendColumn = "dungeonColumn1";
		
		if(document.getElementById("Dragon Roost Cavern_span").parentElement != document.getElementById(appendColumn))
			document.getElementById(appendColumn).appendChild(document.getElementById("Dragon Roost Cavern_span"));
		counter += 1;
	}
	else {
		document.getElementById("drc_span").style.display = "none";
		document.getElementById("dungeonColumn").appendChild(document.getElementById("Dragon Roost Cavern_span"));
	}
	
	if(dungeons.includes("fw")) {
		if(!Required_Dungeons.includes("Forbidden Woods"))
			Required_Dungeons.push("Forbidden Woods");
		document.getElementById("fw_span").style.display = "block";
		
		if(counter >= 2)
			appendColumn = "dungeonColumn1";
		
		if(document.getElementById("Forbidden Woods_span").parentElement != document.getElementById(appendColumn))
			document.getElementById(appendColumn).appendChild(document.getElementById("Forbidden Woods_span"));
		counter += 1;
	}
	else {
		document.getElementById("fw_span").style.display = "none";
		document.getElementById("dungeonColumn").appendChild(document.getElementById("Forbidden Woods_span"));
	}
	
	if(dungeons.includes("tg")) {
		if(!Required_Dungeons.includes("Tower of the Gods"))
			Required_Dungeons.push("Tower of the Gods");
		document.getElementById("tog_span").style.display = "block";
		
		if(counter >= 2)
			appendColumn = "dungeonColumn1";
		
		if(document.getElementById("Tower of the Gods_span").parentElement != document.getElementById(appendColumn))
			document.getElementById(appendColumn).appendChild(document.getElementById("Tower of the Gods_span"));
		counter += 1;
	}
	else {
		document.getElementById("tog_span").style.display = "none";
		document.getElementById("dungeonColumn").appendChild(document.getElementById("Tower of the Gods_span"));
	}
	
	if(dungeons.includes("et") || dungeons.includes("ea")) {
		if(!Required_Dungeons.includes("Earth Temple"))
			Required_Dungeons.push("Earth Temple");
		document.getElementById("et_span").style.display = "block";
		
		if(counter >= 2)
			appendColumn = "dungeonColumn1";
		
		if(document.getElementById("Earth Temple_span").parentElement != document.getElementById(appendColumn))
			document.getElementById(appendColumn).appendChild(document.getElementById("Earth Temple_span"));
		counter += 1;
	}
	else {
		document.getElementById("et_span").style.display = "none";
		document.getElementById("dungeonColumn").appendChild(document.getElementById("Earth Temple_span"));
	}
	
	if(dungeons.includes("wt") || dungeons.includes("wi")) {
		if(!Required_Dungeons.includes("Wind Temple"))
			Required_Dungeons.push("Wind Temple");
		document.getElementById("wt_span").style.display = "block";
		
		if(counter >= 2)
			appendColumn = "dungeonColumn1";
		
		if(document.getElementById("Wind Temple_span").parentElement != document.getElementById(appendColumn))
			document.getElementById(appendColumn).appendChild(document.getElementById("Wind Temple_span"));
		counter += 1;
	}
	else {
		document.getElementById("wt_span").style.display = "none";
		document.getElementById("dungeonColumn").appendChild(document.getElementById("Wind Temple_span"));
	}
	
	if(!Required_Dungeons.includes("Forsaken Fortress")) {
		let loc = "Mailbox - Letter from Aryll";
		document.getElementById(loc).style.display = "none";
		document.getElementById("text_"+loc).style.display = "none";
		document.getElementById("br_"+loc).style.display = "none";
	}
	if(!Required_Dungeons.includes("Forbidden Woods")) {
		let loc = "Mailbox - Letter from Orca";
		document.getElementById(loc).style.display = "none";
		document.getElementById("text_"+loc).style.display = "none";
		document.getElementById("br_"+loc).style.display = "none";
	}
	if(!Required_Dungeons.includes("Earth Temple")) {
		let loc = "Mailbox - Letter from Baito";
		document.getElementById(loc).style.display = "none";
		document.getElementById("text_"+loc).style.display = "none";
		document.getElementById("br_"+loc).style.display = "none";
	}
		
}

function apply_settings() {
	
	settings = Data.settings.find(t=>t.name === document.getElementById("settings_option").value);
	
	for(let i = 0; i < settings.starting_items.length; i++) {
		let item = getItem(settings.starting_items[i]);
		item.obtained = true;
		item.in_logic = true;
		item.could_have = true;
	}
	/*for(let i = 0; i < Data["areas"].length; i++) {
		let Area = Data["areas"][i];
		for(let j = 0; j < Area["locations"].length; j++) {
			let loc = Area["locations"][j];
			for(let k = 0; k < loc["types"].length; k++) {
				if(settings.excluded_check_types.includes(loc["types"][k])) {
					
					//loc.item = "junk";
					document.getElementById(loc.name).style.display = "none";
					document.getElementById("text_"+loc.name).style.display = "none";
					document.getElementById("br_"+loc.name).style.display = "none";
				}
			}
		}
	}*/
	
	
	if(settings.name == "Miniblins") {
		document.getElementById("Maggie's Letter_location").style.display = "none";
		document.getElementById("br_Maggie's Letter").style.display = "none";
		document.getElementById("Moblin's Letter_location").style.display = "none";
		document.getElementById("br_Moblin's Letter").style.display = "none";
		document.getElementById("Progressive Picto Box1_location").style.display = "none";
		document.getElementById("br_Progressive Picto Box1").style.display = "none";
		document.getElementById("Progressive Picto Box2_location").style.display = "none";
		document.getElementById("br_Progressive Picto Box2").style.display = "none";
	}
	else {
		document.getElementById("Maggie's Letter_location").style.display = "inline-block";
		document.getElementById("br_Maggie's Letter").style.display = "inline-block";
		document.getElementById("Moblin's Letter_location").style.display = "inline-block";
		document.getElementById("br_Moblin's Letter").style.display = "inline-block";
		document.getElementById("Progressive Picto Box1_location").style.display = "inline-block";
		document.getElementById("br_Progressive Picto Box1").style.display = "inline-block";
		document.getElementById("Progressive Picto Box2_location").style.display = "inline-block";
		document.getElementById("br_Progressive Picto Box2").style.display = "inline-block";
	}
}

function clickTriforce() {
	for(let i = 1; i <= 8; i++) {
		if(!getItem("Triforce Shard"+i).obtained) {
			getItem("Triforce Shard"+i).obtained = true;
			update();
			return;
		}
	}
	for(let i = 1; i <= 8; i++) {
		getItem("Triforce Shard"+i).obtained = false;
	}
	update();
}

function update_triforce_shards() {
	let temp_img = document.getElementById("Triforce Shards_img");
	getItem("Triforce Shards").count = 0;
	for(let i = 1; i <= 8; i++) {
		if(getItem("Triforce Shard"+i).obtained)
			getItem("Triforce Shards").count += 1;
	}
	
	temp_img.src = "./images/tww/items/Triforce Shards"+getItem("Triforce Shards").count+".png";
}

function update_path_hints() {
	for(let i = 1; i <= 5; i++) {
		let val = document.getElementById("path_boss"+i).value;
		
		if(val == "ff" || val == "he" || val == "hel" || val == "hk") 
			document.getElementById("woth"+i+"_title").innerHTML += " &#8594; FF";
		else if(val == "drc" || val == "dra" || val == "ma" || val == "gohma") 
			document.getElementById("woth"+i+"_title").innerHTML += " &#8594; DRC";
		else if(val == "fw" || val == "for" || val == "kal" || val == "kd" || val == "dem") 
			document.getElementById("woth"+i+"_title").innerHTML += " &#8594; FW";
		else if(val == "tog" || val == "tow" || val == "god" || val == "dan" || val == "gohdan") 
			document.getElementById("woth"+i+"_title").innerHTML += " &#8594; ToG";
		else if(val == "et" || val == "ear" || val == "jal" || val == "ja") 
			document.getElementById("woth"+i+"_title").innerHTML += " &#8594; ET";
		else if(val == "wt" || val == "win" || val == "mol" || val == "mo") 
			document.getElementById("woth"+i+"_title").innerHTML += " &#8594; WT";
		else if(val == "hy" || val == "hyr") 
			document.getElementById("woth"+i+"_title").innerHTML += " &#8594; Hyrule";
		else if(val == "gan" || val == "ga") 
			document.getElementById("woth"+i+"_title").innerHTML += " &#8594; Ganondorf";
	}
}

function update() {
	Dungeon_Items_Remaining = {
		"Dragon Roost Cavern": 12-2,
		"Forbidden Woods": 14-1,
		"Tower of the Gods": 11-1,
		"Earth Temple": 12-1,
		"Wind Temple": 11-1
	}
	
	apply_settings();
	process_inputs();
	update_location_access();
	update_required_dungeons();
	update_item_display();
	highlight_dungeon_requirements();
	update_triforce_shards();
	update_dungeon_checks_remaining();
	update_summary_text();
	woth_and_barren_processing();
	update_path_hints();
	
	let lastCheckID = CheckHistory[CheckHistory.length-1];
	
	if(lastCheckID == "Forbidden Woods - First Room" && document.getElementById('audio_title').innerHTML != '300 - Sail Pump / Cliff Upper / FW1 / DRC Reverse')
		document.getElementById("300bpm").dispatchEvent(new Event('mousedown'));
	if((lastCheckID == "Forbidden Woods - Climb to Top Using Boko Baba Bulbs" || lastCheckID == "Forbidden Woods - Hole in Tree" || lastCheckID == "Forbidden Woods - Big Key Chest") && document.getElementById('audio_title').innerHTML != '257 - Special Chest / FW2 / ET2 / Cabana / MnC Back / Dia-Islet')
		document.getElementById("257bpm").dispatchEvent(new Event('mousedown'));
	if(lastCheckID == "Forbidden Woods - Morth Pit" && document.getElementById('audio_title').innerHTML != '225 - Most Chest / FF / Helmaroc / FW3 / DRC Forw')
		document.getElementById("225bpm").dispatchEvent(new Event('mousedown'));
	if((lastCheckID == "Dragon Roost Cavern - Boss Stairs Left Chest" || lastCheckID == "Dragon Roost Cavern - Boss Stairs Right Chest") && document.getElementById('audio_title').innerHTML != '200 - DSE / DRI / ET1 / DRC Boss / Greatfish')
		document.getElementById("200bpm").dispatchEvent(new Event('mousedown'));
}

update();
setInterval(update,250);
